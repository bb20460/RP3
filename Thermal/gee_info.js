// Separate use case from the full model. This is used for getting specfic information regarding each image pair

function main(Landsat_selected_dataset, selected_S2_collection){
      
      
      function makeRectangle(point, xRadius, yRadius, proj) {
        // Define a Point object.
        var roi = ee.Geometry.Point(point[0], point[1]);
        var roiBuffer = roi.buffer({'distance': 2000}).bounds();
        return roiBuffer;
      }
      
      // Define inputs for making a rectangle from center point.
      var point = [34.59392, 47.50367];  // lat, lon
      
      
      // Make a rectangle from center point.
      var selected_geometry = makeRectangle(point);
      
      function applyScaleFactors(image){
          var opticalBands = image.select('SR_B.').multiply(0.0000275).add(-0.2).multiply(10000)
          var thermalBands = image.select('ST_B.*').multiply(0.00341802).add(149.0).subtract(273.15)
          return image.addBands(opticalBands, null, true) 
                      .addBands(thermalBands, null, true)
      }
        
      var L8_image = ee.Image(Landsat_selected_dataset)
      print('Scene_acquisition_time_L: ',L8_image.get('SCENE_CENTER_TIME'))
      print('MEAN_SOLAR_AZIMUTH_ANGLE_L: ',L8_image.get('SUN_AZIMUTH'))
      print('MEAN_SOLAR_ZENITH_ANGLE_L: ',(L8_image.get('SUN_ELEVATION')))
      var MEAN_SOLAR_AZIMUTH_ANGLE_L = L8_image.get('SUN_AZIMUTH')
      var MEAN_SOLAR_ZENITH_ANGLE_L = L8_image.get('SUN_ELEVATION')
      
      var acquisition_date_landsat = L8_image.get('system:time_start');
      var acquisition_date_landsat = ee.Date(acquisition_date_landsat).format('YYYY-MM-dd');
      
  
      var L8_image = applyScaleFactors(L8_image)
  
      var L8_image = L8_image.clip(selected_geometry)
      print(L8_image)
  
      //Landsat 8 NDVI (30m spatial resolution)
      var ndvi = L8_image.normalizedDifference(['SR_B5', 'SR_B4']).rename('ndvi')
      var ndviParams = {'min': -1, 'max': 1, 'palette': ['purple', 'pink', 'green']}
      var ndviclipped = ndvi.clip(selected_geometry)
  
      var ndwi = L8_image.normalizedDifference(['SR_B3', 'SR_B5']).rename('ndwi')
      var ndwiParams = {'min': -1, 'max': 1, 'palette': ['green', 'yellow', 'red', 'blue', 'navy']}
      var ndwiclipped = ndwi.clip(selected_geometry)
  
      var ndbi = L8_image.normalizedDifference(['SR_B6', 'SR_B5']).rename('ndbi')
      var ndbiParams = {'min': -1, 'max': 1, 'palette': ['blue', 'yellow', 'red']}
      var ndbiclipped = ndbi.clip(selected_geometry)
  
      
      //Calculate Landsat 8 LST in Celsius Degrees (30m spatial resolution))
      var L8_LST_30m = L8_image.select('ST_B10').rename('L8_LST_30m')
  
      //min max L8_LST_30m
      var min = ee.Number(L8_LST_30m.reduceRegion({
                  'reducer': ee.Reducer.min(),
                  'scale': 30,
                  'maxPixels': 1e9
                  }).values().get(0))
  
      var max = ee.Number(L8_LST_30m.reduceRegion({
                  'reducer': ee.Reducer.max(),
                  'scale': 30,
                  'maxPixels': 1e9
                  }).values().get(0))
      
      var mean = ee.Number(L8_LST_30m.reduceRegion({
              'reducer': ee.Reducer.mean(),
              'scale': 30,
              'maxPixels': 1e9
              }).values().get(0))
      
  
      var medianpixels = ee.Image(selected_S2_collection)
      print('Scene_acquisition_time_S: ',medianpixels.get('system:id'))
      print('MEAN_SOLAR_AZIMUTH_ANGLE_S: ',medianpixels.get('MEAN_SOLAR_AZIMUTH_ANGLE'))
      print('MEAN_SOLAR_ZENITH_ANGLE_S: ',medianpixels.get('MEAN_SOLAR_ZENITH_ANGLE'))
      print('                                                 ')
      var MEAN_SOLAR_AZIMUTH_ANGLE_S = medianpixels.get('MEAN_SOLAR_AZIMUTH_ANGLE')
      var MEAN_SOLAR_ZENITH_ANGLE_S = medianpixels.get('MEAN_SOLAR_ZENITH_ANGLE')
      var acquisition_date_sentinel = medianpixels.get('system:time_start');
      var acquisition_date_sentinel = ee.Date(acquisition_date_sentinel).format('YYYY-MM-dd');

  
      var S2_image = medianpixels.clip(selected_geometry).divide(10000)
      
      var dictionary_normal = {
          'Landsat Acquisition Date': acquisition_date_landsat.getInfo(),
          'Sentinel Acquisition Date': acquisition_date_sentinel.getInfo(),
          'L_LST Max Temp': max,
          'L_LST Min Temp': min,
          'L_LST Mean Temp': mean,
      }
  
      
      //Calculate Sentinel 2 spectral indices NDVI, NDWI and NDBI
  
      //Sentinel 2 NDVI (10m spatial resolution).
      var S2_ndvi = S2_image.normalizedDifference(['B8', 'B4']).rename('S2_NDVI')
      var S2_ndviParams4 = {'min': -1, 'max': 1, 'palette': ['purple', 'pink', 'green']}
      var S2_ndviclipped = S2_ndvi.clip(selected_geometry)
  
      //Map.addLayer(S2_ndviclipped, S2_ndviParams4, 'S2_ndvi');
  
      //Sentinel 2 NDWI (10m spatial resolution).
      var S2_ndwi = S2_image.normalizedDifference(['B3', 'B11']).rename('S2_NDWI')
      var S2_ndwiParams4 = {'min': -1, 'max': 1, 'palette': ['green', 'yellow', 'red', 'blue', 'navy']}
      var S2_ndwiclipped = S2_ndwi.clip(selected_geometry)
  
      //Map.addLayer(S2_ndwiclipped, S2_ndwiParams4, 'S2_ndwi');
  
      //Sentinel 2 NDBI (10m spatial resolution).
      var S2_ndbi = S2_image.normalizedDifference(['B11', 'B8']).rename('S2_NDBI')
      var S2_ndbiParams4 = {'min': -1, 'max': 1, 'palette': ['blue', 'yellow', 'purple']}
      var S2_ndbiclipped = S2_ndbi.clip(selected_geometry)
  
      //Regression Calculation 
      
      //preparing bands
      var bands = ee.Image(1).addBands(ndvi).addBands(ndbi).addBands(ndwi).addBands(L8_LST_30m).rename(["constant", "ndvi", "ndbi", "ndwi", "L8"])
  
      // run the multiple regression analysis
      var imageRegression = bands.reduceRegion({
                          'reducer': ee.Reducer.linearRegression({'numX':4, 'numY':1}),
                          'geometry': selected_geometry,
                          'scale': 30,
                          })
  
      var coefList2 = ee.Array(imageRegression.get("coefficients")).toList()
      var intercept2 = ee.Image(ee.Number(ee.List(coefList2.get(0)).get(0)))
      var intercept2_list = ee.List(coefList2.get(0)).get(0)
      var slopeNDVI2 = ee.Image(ee.Number(ee.List(coefList2.get(1)).get(0)))
      var slopeNDVI2_list =  ee.List(coefList2.get(1)).get(0)
      var slopeNDBI2 = ee.Image(ee.Number(ee.List(coefList2.get(2)).get(0)))
      var slopeNDBI2_list =  ee.List(coefList2.get(2)).get(0)
      var slopeNDWI2 = ee.Image(ee.Number(ee.List(coefList2.get(3)).get(0)))
      var slopeNDWI2_list =  ee.List(coefList2.get(3)).get(0)
  
      //calculate the final downscaled image
      var downscaled_LST_10m = ee.Image(intercept2).add(slopeNDVI2.multiply(S2_ndvi))
                  .add(slopeNDBI2.multiply(S2_ndbi)).add(slopeNDWI2.multiply(S2_ndwi))
  
      // L8-LST 30 m model calculation
  
      var L8_LST_MODEL = intercept2.add(slopeNDVI2.multiply(ndvi))
                  .add(slopeNDBI2.multiply(ndbi))
                  .add(slopeNDWI2.multiply(ndwi)).clip(selected_geometry)
  
      var L8_RESIDUALS = L8_LST_30m.subtract(L8_LST_MODEL)
      
      var palette = ['040274', '040281', '0502a3', '0502b8', '0502ce', '0502e6',
                  '0602ff', '235cb1', '307ef3', '269db1', '30c8e2', '32d3ef',
                  //'3be285', '3ff38f', '86e26f', '3ae237', 'b5e22e', 
                  'd6e21f', 'fff705', 'ffd611', 'ffb613', 'ff8b13', 'ff6e08', 'ff500d',
                  'ff0000', 'de0101', 'c21301', 'a71001', '911003']
  
      // Gaussian convolution
  
      // Define a gaussian kernel
      var gaussian = ee.Kernel.gaussian({
          'radius': 1.5, 
          'units': 'pixels'
      })
  
      // Smooth the image by convolving with the gaussian kernel.
      var L8_RESIDUALS_gaussian = L8_RESIDUALS.resample("bicubic").convolve(gaussian)
  
      var visParam_residuals = {
          'min': -10,
          'max': 9,
          'palette': ['blue', 'yellow', 'red']
      }
  
      // Calculate the final downscaled LSTs
      var downscaled_LST_10m2 = ee.Image(intercept2).add(slopeNDVI2.multiply(S2_ndvi))
                  .add(slopeNDBI2.multiply(S2_ndbi)).add(slopeNDWI2.multiply(S2_ndwi))
      
      //Map.addLayer(downscaled_LST_10m2, lstParams2, 'S2-LST 10m (no residuals)');
      
      var S2_LST_10_w_Residuals = downscaled_LST_10m2.add(L8_RESIDUALS_gaussian)
  
      var S2_LST_10_w_Residuals = ee.Image(S2_LST_10_w_Residuals)
  
    
      //img = ee.ImageCollection.fromImages([S2_LST_10_w_Residuals]).first()
  
      // Convert img to ImageCollection
      //img_collection = ee.ImageCollection.fromImages(img)
  
      //Get the first image from the ImageCollection
      //img = img_collection.first()
      //print('bands: ', img.bandNames().getInfo())
      
      var min_legend = ee.Number(S2_LST_10_w_Residuals.reduceRegion({
              'reducer': ee.Reducer.min(),
              'scale': 10,
              'maxPixels': 1e12,
              'crs': 'EPSG:4326'
              }).values().get(0))
  
      var max_legend = ee.Number(S2_LST_10_w_Residuals.reduceRegion({
              'reducer': ee.Reducer.max(),
              'scale': 10,
              'maxPixels': 1e12,
              'crs': 'EPSG:4326'
              }).values().get(0))
      
      var mean_legend = ee.Number(S2_LST_10_w_Residuals.reduceRegion({
          'reducer': ee.Reducer.mean(),
          'scale': 10,
          'maxPixels': 1e9
          }).values().get(0))
  
      var min_temp = min_legend.getInfo()
      var max_temp = max_legend.getInfo()
      var mean_temp = mean_legend.getInfo()
  
      var dictionary_downscale = {
          'Landsat Acquisition Date': acquisition_date_landsat.getInfo(),
          'Sentinel Acquisition Date': acquisition_date_sentinel.getInfo(),
          'Downscale Max Temp': max_temp,
          'Downscale Min Temp': min_temp,
          'Downscale Mean Temp': mean_temp,
      }
  
  
      Export.image.toDrive({
        image: L8_LST_30m,
        description: 'L8_LandsatLST_' + acquisition_date_landsat.getInfo() + '_' + acquisition_date_sentinel.getInfo(),
        folder: "NormalTest2019",
        scale: 30,
        region: selected_geometry,
        fileFormat: 'GeoTIFF',
        formatOptions: {
          cloudOptimized: true
        }
      });
      
      Export.image.toDrive({
        image: S2_LST_10_w_Residuals,
        description: 'L8_DownscaledLST_' + acquisition_date_landsat.getInfo() + '_' + acquisition_date_sentinel.getInfo(),
        folder: "DownscaleTest2019",
        scale: 10,
        region: selected_geometry,
        fileFormat: 'GeoTIFF',
        formatOptions: {
          cloudOptimized: true
        }
      });
      

      // landsat 9: 2021-10-31
      // landsat 8: 2013-03-18
      // sentinel-2: 2015-06-23
  
      var feature = ee.Feature(null, dictionary_downscale);
    

  
      //arr_normal = np.array([acquisition_date_landsat, acquisition_date_sentinel, max, min, mean])
  
      return feature

}


var land_8 = ['LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20221114', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20221114']

var s2_8 = ['COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220223T084941_20220223T085322_T36TXT', 'COPERNICUS/S2/20220228T084809_20220228T084909_T36TXT', 'COPERNICUS/S2/20220307T083719_20220307T083720_T36TXT', 'COPERNICUS/S2/20220312T083741_20220312T084316_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220531T083611_20220531T084542_T36TXT', 'COPERNICUS/S2/20220603T084611_20220603T085254_T36TXT', 'COPERNICUS/S2/20220605T083559_20220605T083716_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220615T083609_20220615T083657_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20220718T084609_20220718T084918_T36TXT', 'COPERNICUS/S2/20220720T083611_20220720T084636_T36TXT', 'COPERNICUS/S2/20220723T084611_20220723T085405_T36TXT', 'COPERNICUS/S2/20221001T084801_20221001T085326_T36TXT', 'COPERNICUS/S2/20221006T084829_20221006T085246_T36TXT', 'COPERNICUS/S2/20221008T083841_20221008T084315_T36TXT', 'COPERNICUS/S2/20221011T084911_20221011T085327_T36TXT', 'COPERNICUS/S2/20220213T085051_20220213T085320_T36TXT', 'COPERNICUS/S2/20220215T083929_20220215T083956_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220322T083631_20220322T084152_T36TXT', 'COPERNICUS/S2/20220325T084611_20220325T085211_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220506T083559_20220506T083708_T36TXT', 'COPERNICUS/S2/20220509T084559_20220509T085000_T36TXT', 'COPERNICUS/S2/20220511T083601_20220511T084313_T36TXT', 'COPERNICUS/S2/20220603T084611_20220603T085254_T36TXT', 'COPERNICUS/S2/20220605T083559_20220605T083716_T36TXT', 'COPERNICUS/S2/20220608T084559_20220608T085005_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20221115T085129_20221115T085320_T36TXT', 'COPERNICUS/S2/20221117T084231_20221117T084453_T36TXT']

var land_9 = ['LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20221115', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20221115', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220428', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220428', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919']

var s2_9 = ['COPERNICUS/S2/20220213T085051_20220213T085320_T36TXT', 'COPERNICUS/S2/20220215T083929_20220215T083956_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220322T083631_20220322T084152_T36TXT', 'COPERNICUS/S2/20220325T084611_20220325T085211_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220506T083559_20220506T083708_T36TXT', 'COPERNICUS/S2/20220509T084559_20220509T085000_T36TXT', 'COPERNICUS/S2/20220511T083601_20220511T084313_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220625T083609_20220625T083659_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20221115T085129_20221115T085320_T36TXT', 'COPERNICUS/S2/20221117T084231_20221117T084453_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220223T084941_20220223T085322_T36TXT', 'COPERNICUS/S2/20220228T084809_20220228T084909_T36TXT', 'COPERNICUS/S2/20220426T083559_20220426T084606_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220615T083609_20220615T083657_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220625T083609_20220625T083659_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220913T083559_20220913T084315_T36TXT', 'COPERNICUS/S2/20220918T083621_20220918T084650_T36TXT', 'COPERNICUS/S2/20220921T084641_20220921T085604_T36TXT', 'COPERNICUS/S2/20220923T083639_20220923T083837_T36TXT']

var features = []

for (var i = 0; i < land_8.length; i++) {

  var feature = main(land_8[i], s2_8[i])

}

var featureCollection = ee.FeatureCollection(features);

// Export the FeatureCollection.
Export.table.toDrive({
  collection: featureCollection,
  description: 'L8_DownscaledLST_20220101_20221231',
  folder: 'DownscaledLSTData',
  fileFormat: 'CSV'
});


////////////////////// For Collection properties ///////////////////////////////////////////////

//for (var i = 0; i < land_8.length; i++) {
//  var means = main(land_8[i], s2_8[i])
//  var MEAN_SOLAR_AZIMUTH_ANGLE_L = means[0]
//  var MEAN_SOLAR_ZENITH_ANGLE_L = means[1]
//  var MEAN_SOLAR_AZIMUTH_ANGLE_S = means[2]
//  var MEAN_SOLAR_ZENITH_ANGLE_S = means[3]
  
  //var feature = 
  //features[i] = feature
        // Wrap the Feature in a FeatureCollection for export.
//  mean_a_l[i] = MEAN_SOLAR_AZIMUTH_ANGLE_L
//  mean_z_l[i] = MEAN_SOLAR_ZENITH_ANGLE_L
//  mean_a_s[i] = MEAN_SOLAR_AZIMUTH_ANGLE_S
//  mean_z_s[i] = MEAN_SOLAR_ZENITH_ANGLE_S
//}

//print(mean_a_l)
//print(mean_z_l)
//print(mean_a_s)
//print(mean_z_s)

//function calculateAverage(array) {
//    var total = 0;
//    var count = 0;

//    array.forEach(function(item, index) {
//        total += item;
//        count++;
//    });

//    return total / count;
//}

//var mean_a_l = calculateAverage(mean_a_l)
//var mean_z_l = calculateAverage(mean_z_l)
//var mean_a_s = calculateAverage(mean_a_s)
//var mean_z_s = calculateAverage(mean_z_s)

//print(mean_a_l)
//print(mean_z_l)
//print(mean_a_s)
//print(mean_z_s)


/////////////////////////////////////////////////////////////

//var featureCollection = ee.FeatureCollection(features);

// Export the FeatureCollection.
//Export.table.toDrive({
//  collection: featureCollection,
//  description: 'DownscaledLST_20190101_20221231',
//  folder: 'DownscaledLSTData',
//  fileFormat: 'CSV'
//});

/////////////////////CODE FOR MASS ACCEPTANCE OF TASKS AND DOWNLOADS/////////////////////////////
/**
 * Copyright (c) 2017 Dongdong Kong. All rights reserved.
 * This work is licensed under the terms of the MIT license.  
 * For a copy, see <https://opensource.org/licenses/MIT>.
 *
 * Batch execute GEE Export task
 *
 * First of all, You need to generate export tasks. And run button was shown.
 *   
 * Then press F12 get into console, then paste those scripts in it, and press 
 * enter. All the task will be start automatically. 
 * (Firefox and Chrome are supported. Other Browsers I didn't test.)
 * 
 * @Author: 
 *  Dongdong Kong, 28 Aug' 2017, Sun Yat-sen University
 *  yzq.yang, 17 Sep' 2021
 */
//function runTaskList(){
//    // var tasklist = document.getElementsByClassName('task local type-EXPORT_IMAGE awaiting-user-config');
//    // for (var i = 0; i < tasklist.length; i++)
//    //         tasklist[i].getElementsByClassName('run-button')[0].click();
//    $$('.run-button' ,$$('ee-task-pane')[0].shadowRoot).forEach(function(e) {
//         e.click();
//    })
//}
//
//function confirmAll() {
//    // var ok = document.getElementsByClassName('goog-buttonset-default goog-buttonset-action');
//    // for (var i = 0; i < ok.length; i++)
//    //     ok[i].click();
//    $$('ee-table-config-dialog, ee-image-config-dialog').forEach(function(e) {
//         var eeDialog = $$('ee-dialog', e.shadowRoot)[0]
//         var paperDialog = $$('paper-dialog', eeDialog.shadowRoot)[0]
//         $$('.ok-button', paperDialog)[0].click()
//    })
//}

//runTaskList();
//confirmAll();

///////////////////// TESTING PURPOSES //////////////////////////////////////

//var land_8 = ['LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224']
// var s2_8 = ['COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220223T084941_20220223T085322_T36TXT'
// var land_9 = ['LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216']
// var s2_9 = ['COPERNICUS/S2/20220213T085051_20220213T085320_T36TXT', 'COPERNICUS/S2/20220215T083929_20220215T083956_T36TXT']


///////////////////// 2022-01-01 TO 2022-12-31 //////////////////////////////////

//var land_8 = ['LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20221114', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20221114']

//var s2_8 = ['COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220223T084941_20220223T085322_T36TXT', 'COPERNICUS/S2/20220228T084809_20220228T084909_T36TXT', 'COPERNICUS/S2/20220307T083719_20220307T083720_T36TXT', 'COPERNICUS/S2/20220312T083741_20220312T084316_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220531T083611_20220531T084542_T36TXT', 'COPERNICUS/S2/20220603T084611_20220603T085254_T36TXT', 'COPERNICUS/S2/20220605T083559_20220605T083716_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220615T083609_20220615T083657_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20220718T084609_20220718T084918_T36TXT', 'COPERNICUS/S2/20220720T083611_20220720T084636_T36TXT', 'COPERNICUS/S2/20220723T084611_20220723T085405_T36TXT', 'COPERNICUS/S2/20221001T084801_20221001T085326_T36TXT', 'COPERNICUS/S2/20221006T084829_20221006T085246_T36TXT', 'COPERNICUS/S2/20221008T083841_20221008T084315_T36TXT', 'COPERNICUS/S2/20221011T084911_20221011T085327_T36TXT', 'COPERNICUS/S2/20220213T085051_20220213T085320_T36TXT', 'COPERNICUS/S2/20220215T083929_20220215T083956_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220322T083631_20220322T084152_T36TXT', 'COPERNICUS/S2/20220325T084611_20220325T085211_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220506T083559_20220506T083708_T36TXT', 'COPERNICUS/S2/20220509T084559_20220509T085000_T36TXT', 'COPERNICUS/S2/20220511T083601_20220511T084313_T36TXT', 'COPERNICUS/S2/20220603T084611_20220603T085254_T36TXT', 'COPERNICUS/S2/20220605T083559_20220605T083716_T36TXT', 'COPERNICUS/S2/20220608T084559_20220608T085005_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20221115T085129_20221115T085320_T36TXT', 'COPERNICUS/S2/20221117T084231_20221117T084453_T36TXT']

//var land_9 = ['LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20221115', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20221115', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220428', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220428', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919']

//var s2_9 = ['COPERNICUS/S2/20220213T085051_20220213T085320_T36TXT', 'COPERNICUS/S2/20220215T083929_20220215T083956_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220322T083631_20220322T084152_T36TXT', 'COPERNICUS/S2/20220325T084611_20220325T085211_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220506T083559_20220506T083708_T36TXT', 'COPERNICUS/S2/20220509T084559_20220509T085000_T36TXT', 'COPERNICUS/S2/20220511T083601_20220511T084313_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220625T083609_20220625T083659_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20221115T085129_20221115T085320_T36TXT', 'COPERNICUS/S2/20221117T084231_20221117T084453_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220223T084941_20220223T085322_T36TXT', 'COPERNICUS/S2/20220228T084809_20220228T084909_T36TXT', 'COPERNICUS/S2/20220426T083559_20220426T084606_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220615T083609_20220615T083657_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220625T083609_20220625T083659_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220913T083559_20220913T084315_T36TXT', 'COPERNICUS/S2/20220918T083621_20220918T084650_T36TXT', 'COPERNICUS/S2/20220921T084641_20220921T085604_T36TXT', 'COPERNICUS/S2/20220923T083639_20220923T083837_T36TXT']


///////////////////// 2019-01-01 TO 2022-12-31 //////////////////////////////////


//var land_8 = ['LANDSAT/LC08/C02/T1_L2/LC08_177027_20190421', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20190421', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20191201', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20210316', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20210316', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20221114', 'LANDSAT/LC08/C02/T1_L2/LC08_178027_20221114']

//var s2_8 = ['COPERNICUS/S2/20190415T084609_20190415T085628_T36TXT', 'COPERNICUS/S2/20190417T083601_20190417T083603_T36TXT', 'COPERNICUS/S2/20191126T085311_20191126T085522_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220223T084941_20220223T085322_T36TXT', 'COPERNICUS/S2/20220228T084809_20220228T084909_T36TXT', 'COPERNICUS/S2/20220307T083719_20220307T083720_T36TXT', 'COPERNICUS/S2/20220312T083741_20220312T084316_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220531T083611_20220531T084542_T36TXT', 'COPERNICUS/S2/20220603T084611_20220603T085254_T36TXT', 'COPERNICUS/S2/20220605T083559_20220605T083716_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220615T083609_20220615T083657_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20220718T084609_20220718T084918_T36TXT', 'COPERNICUS/S2/20220720T083611_20220720T084636_T36TXT', 'COPERNICUS/S2/20220723T084611_20220723T085405_T36TXT', 'COPERNICUS/S2/20221001T084801_20221001T085326_T36TXT', 'COPERNICUS/S2/20221006T084829_20221006T085246_T36TXT', 'COPERNICUS/S2/20221008T083841_20221008T084315_T36TXT', 'COPERNICUS/S2/20221011T084911_20221011T085327_T36TXT', 'COPERNICUS/S2/20210310T084801_20210310T085322_T36TXT', 'COPERNICUS/S2/20210312T083719_20210312T083722_T36TXT', 'COPERNICUS/S2/20220213T085051_20220213T085320_T36TXT', 'COPERNICUS/S2/20220215T083929_20220215T083956_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220322T083631_20220322T084152_T36TXT', 'COPERNICUS/S2/20220325T084611_20220325T085211_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220506T083559_20220506T083708_T36TXT', 'COPERNICUS/S2/20220509T084559_20220509T085000_T36TXT', 'COPERNICUS/S2/20220511T083601_20220511T084313_T36TXT', 'COPERNICUS/S2/20220603T084611_20220603T085254_T36TXT', 'COPERNICUS/S2/20220605T083559_20220605T083716_T36TXT', 'COPERNICUS/S2/20220608T084559_20220608T085005_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20221115T085129_20221115T085320_T36TXT', 'COPERNICUS/S2/20221117T084231_20221117T084453_T36TXT']

//var land_9 = ['LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220216', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220320', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220507', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220624', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20220710', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20221115', 'LANDSAT/LC09/C02/T1_L2/LC09_177027_20221115', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220223', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220428', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220428', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220615', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220701', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919', 'LANDSAT/LC09/C02/T1_L2/LC09_178027_20220919']

//var s2_9 = ['COPERNICUS/S2/20220213T085051_20220213T085320_T36TXT', 'COPERNICUS/S2/20220215T083929_20220215T083956_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220315T084731_20220315T085323_T36TXT', 'COPERNICUS/S2/20220317T083659_20220317T084216_T36TXT', 'COPERNICUS/S2/20220322T083631_20220322T084152_T36TXT', 'COPERNICUS/S2/20220325T084611_20220325T085211_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220506T083559_20220506T083708_T36TXT', 'COPERNICUS/S2/20220509T084559_20220509T085000_T36TXT', 'COPERNICUS/S2/20220511T083601_20220511T084313_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220625T083609_20220625T083659_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220708T084609_20220708T084925_T36TXT', 'COPERNICUS/S2/20220715T083609_20220715T083658_T36TXT', 'COPERNICUS/S2/20221115T085129_20221115T085320_T36TXT', 'COPERNICUS/S2/20221117T084231_20221117T084453_T36TXT', 'COPERNICUS/S2/20220220T084001_20220220T084314_T36TXT', 'COPERNICUS/S2/20220223T084941_20220223T085322_T36TXT', 'COPERNICUS/S2/20220228T084809_20220228T084909_T36TXT', 'COPERNICUS/S2/20220426T083559_20220426T084606_T36TXT', 'COPERNICUS/S2/20220501T083611_20220501T084314_T36TXT', 'COPERNICUS/S2/20220610T083611_20220610T084304_T36TXT', 'COPERNICUS/S2/20220613T084611_20220613T085535_T36TXT', 'COPERNICUS/S2/20220615T083609_20220615T083657_T36TXT', 'COPERNICUS/S2/20220618T084559_20220618T085011_T36TXT', 'COPERNICUS/S2/20220620T083611_20220620T084448_T36TXT', 'COPERNICUS/S2/20220625T083609_20220625T083659_T36TXT', 'COPERNICUS/S2/20220630T083611_20220630T084623_T36TXT', 'COPERNICUS/S2/20220703T084611_20220703T085107_T36TXT', 'COPERNICUS/S2/20220705T083609_20220705T083659_T36TXT', 'COPERNICUS/S2/20220913T083559_20220913T084315_T36TXT', 'COPERNICUS/S2/20220918T083621_20220918T084650_T36TXT', 'COPERNICUS/S2/20220921T084641_20220921T085604_T36TXT', 'COPERNICUS/S2/20220923T083639_20220923T083837_T36TXT']

//////////////////// LANDSAT 8 ALL <10% ////////////////////////////////////////////////
//var landsat_8 = [
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20150715",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20150731",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20150901",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20160208",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20160428",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20160514",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20160717",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20160818",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20160903",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20170415",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20170501",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20170517",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20170805",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20170821",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20170906",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20180504",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20180605",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20180621",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20180808",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20180824",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20181011",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20190421",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20190608",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20190726",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20190811",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20190827",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20190912",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20191030",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20191115",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20191201",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200102",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200407",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200423",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200610",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200626",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200712",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200829",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20200914",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20201016",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20210629",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20210715",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20210731",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20210816",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20210901",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20220224",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20220312",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20220531",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20220616",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20220702",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20220718",
// "LANDSAT/LC08/C02/T1_L2/LC08_177027_20221006",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20150706",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20150722",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20150807",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20150823",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20151010",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20160130",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20160302",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20160521",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20160622",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20160708",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20160724",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20160910",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20161028",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170116",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170305",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170406",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170422",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170524",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170727",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170812",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170913",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20170929",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180409",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180511",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180527",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180612",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180628",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180730",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180815",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20180831",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20190428",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20190615",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20190701",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20190717",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20190903",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20190919",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20200210",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20200226",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20200430",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20200703",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20200719",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20200804",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20200921",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20201007",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20210316",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20210401",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20210417",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20210823",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20210908",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20211026",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20211111",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20220215",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20220319",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20220506",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20220607",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20220709",
// "LANDSAT/LC08/C02/T1_L2/LC08_178027_20221114"]
